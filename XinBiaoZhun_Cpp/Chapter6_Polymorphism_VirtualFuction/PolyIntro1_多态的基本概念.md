# 多态的基本概念

“多态”(polymorphism)指的是同一名字的事物可以完成不同的功能。多态可以分为编译时的多态和运行时的多态。前者主要是指函数的重载(包括运算符的重载)、对重载函数的调用，在编译时就能根据实参确定应该调用哪个函数，因此叫编译时的多态；而后者则和继承、虚函数等概念有关。

对于通过基类**指针(或引用)**调用基类和派生类中都有的**同名、同参数表**的虚函数的语句，编译时并不确定要执行的是基类还是派生类的虚函数；而当程序运行到该语句时，如果基类指针(或引用)指向的是(或引用的是)一个基类对象，则基类的虚函数被调用，如果是一个派生类对象，则派生类的虚函数被调用。这种机制就叫做“**多态**”。

所谓“**虚函数**”，就是在声明时前面加了`virtual`关键字的成员函数。`virtual`关键字只在类定义中的成员函数声明处使用，不能在类外部写成员函数体时使用。静态成员函数不能是虚函数。

包含虚函数的类称为“多态类”。

多态可以简单地理解为同一条函数调用语句能调用不同的函数；或者说，对不同对象发送同一消息，使得不同对象有各自不同的行为。多态是通过虚函数表实现的。

在普通成员函数中调用虚函数是多态，但在构造函数和析构函数中调用虚函数不是多态。

有虚函数的类，其析构函数也应该实现为虚函数。

包含纯虚函数的类叫抽象类。不能用抽象类定义定义对象。抽象类的派生类，仅当实现了所有的纯虚函数，才会变成非抽象类。        

​               

> ***C++ Primer***
>
> 一个派生类的函数如果覆盖了某个继承而来的虚函数，则它的形参类型必须与被它覆盖的基类函数完全一致。
>
> 同样，派生类中虚函数的返回类型也必须与基类函数匹配。该规则存在一个例外，当类的虚函数返回类型是类本身的指针或引用时，上述规则无效。也就是说，如果D由B派生得到，则基类的虚函数可以返回B＊而派生类的对应函数可以返回D＊，只不过这样的返回类型要求从D到B的类型转换是可访问的。